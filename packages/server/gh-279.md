# [Better error messaging if manifest fails to load](https://github.com/thefrontside/bigtest/issues/279)

## Example manifest

```javascript
let load = (res) => res.default || res;
const children = [
  Object.assign({}, load(require("./test1.t.js")), { path: "./tmp/manifest-generator/test1.t.js" }),
  Object.assign({}, load(require("./test2.t.js")), { path: "./tmp/manifest-generator/test2.t.js" }),
];

module.exports = {
  description: "All tests",
  steps: [],
  assertions: [],
  children: children,
}
```

- This includes mainfest generation of the above in `createManifestGenerator` and building the manifest in `Bundler.create` in `createManifestBuilder`.

- A bundler status is required in the `OrchestratorState`:
```typescript
type BundlerStatus = 'unknown' | 'building' | 'errored' | 'green';

export type Bundle = {
  status: BundlerStatus;
}

export interface Manifest extends Test {
  fileName: string;
  bundle: Bundle;
}

export type OrchestratorState = {
  agents: Record<string, AgentState>;
  manifest: Manifest;
  testRuns: Record<string, TestRunState>;
}
```
- Initial state looks like this:
```typescript
let atom = new Atom<OrchestratorState>({
    manifest: {
      description: "None",
      fileName: "<init>",
      steps: [],
      assertions: [],
      children: [],
      bundle: {
        status: 'unknown'
      }

    // rest
}
```
## Acceptance criteria
- `BundlerStatus` changes to `building` at the start of bundle generation and remains there until the happy path `green` or the sad path `errored`.
- Any error in `createManifestGenerator` or `createManifestBuilder` sets the `BundlerStatus` to `errored`.
- Is there any additional error reporting required apart from status change
- What have I missed?

## Questions
- understand `atom` and `effection` communication better
- where do I call `bundleStatus.set(statys);
